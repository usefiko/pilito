# ๐ฑ ุฑุงูููุง ุณุฑุน ูุฑุงูุช - ูพุงุณุฎ ุจู ฺฉุงููุช ุงูุณุชุงฺฏุฑุงู

## ๐ฏ ฺู ฺุฒ ุจุงุฏ ุงุถุงูู ุดูุฏุ

### 1. ุฏุฑ ุตูุญู Workflow Builder:

#### ุงูู) ุจุฎุด Trigger:
ฺฉ trigger type ุฌุฏุฏ ุงุถุงูู ฺฉูุฏ:
- **ูุงู**: `INSTAGRAM_COMMENT`
- **ูุจู**: "ฺฉุงููุช ุงูุณุชุงฺฏุฑุงู"
- **ุขฺฉูู**: ๐ฌ
- **Badge**: "ุฌุฏุฏ"

#### ุจ) ุจุฎุด Action:
ฺฉ action type ุฌุฏุฏ ุงุถุงูู ฺฉูุฏ:
- **ูุงู**: `instagram_comment_dm_reply`
- **ูุจู**: "ูพุงุณุฎ ุจู ฺฉุงููุช ุงูุณุชุงฺฏุฑุงู"
- **ุขฺฉูู**: ๐ฑ
- **Badge**: "ุฌุฏุฏ"

---

### 2. Form ุชูุธูุงุช ุงู Action ุดุงูู:

#### ุจุฎุด ุงูู: ุชูุธูุงุช ุฏุงุฑฺฉุช
```
๐ฉ ุฏุงุฑฺฉุช (DM):
  โ ูุชู ุซุงุจุช (STATIC)
      โ Textarea ุจุฑุง ูุชู (ุจุง ูุชุบุฑูุง {{username}}, {{comment_text}})
      โ ูพุดุชุจุงู ุงุฒ [[CTA:ุนููุงู|ููฺฉ]] ุจุฑุง ุฏฺฉูู
      
  โ ูุนุฑู ูุญุตูู (PRODUCT)
      โ Dropdown/AsyncSelect ุจุฑุง ุงูุชุฎุงุจ ูุญุตูู
      โ AI ุฎูุฏฺฉุงุฑ ูุชู ุฑุง ูโุณุงุฒุฏ
```

#### ุจุฎุด ุฏูู: ูพุงุณุฎ ุนููู (ุงุฎุชุงุฑ)
```
๐ฌ ูพุงุณุฎ ุนููู:
  โ ูุนุงู/ุบุฑูุนุงู (Toggle)
  โ Textarea ุจุฑุง ูุชู ูพุงุณุฎ (ุญุฏุงฺฉุซุฑ 300 ฺฉุงุฑุงฺฉุชุฑ)
```

---

### 3. ุฏุฑ ุตูุญู Instagram Channels:

ููุงุด account type:
```
โ Business Account โ ูโุชูุงูุฏ ุงุฒ ุงู ูุงุจูุช ุงุณุชูุงุฏู ฺฉูุฏ
โญ Creator Account โ ูโุชูุงูุฏ ุงุฒ ุงู ูุงุจูุช ุงุณุชูุงุฏู ฺฉูุฏ
โ Personal Account โ ูุดุฏุงุฑ: ูุงุฒ ุจู ุชุจุฏู ุจู Business
```

ุฏฺฉูู ุฌุฏุฏ: **"๐ ุชุณุช Webhook"**

---

### 4. ุตูุญู ูุญุตููุงุช (ุงฺฏุฑ ูุณุช):

ุณุงุฏูโุชุฑู ูุณุฎู:
- ูุณุช ูุญุตููุงุช ุจุง ุนฺฉุณุ ูุงูุ ููุช
- ุฏฺฉูู "ุงูุฒูุฏู ูุญุตูู ุฌุฏุฏ"
- ุงูฺฉุงู ูุนุงู/ุบุฑูุนุงู ฺฉุฑุฏู

---

## ๐ APIูุง ููุฑุฏ ูุงุฒ:

### 1. ุฏุฑุงูุช ูุญุตููุงุช:
```http
GET /api/knowledge/products/
GET /api/knowledge/products/?search=query
```

### 2. ุณุงุฎุช Workflow:
```http
POST /api/workflow/workflows/

Body ูุซุงู:
{
  "name": "ูพุงุณุฎ ุจู ฺฉุงููุช ููุช",
  "triggers": [
    {
      "trigger_type": "INSTAGRAM_COMMENT"
    }
  ],
  "actions": [
    {
      "action_type": "instagram_comment_dm_reply",
      "config": {
        "dm_mode": "PRODUCT",
        "product_id": "uuid",
        "public_reply_enabled": true,
        "public_reply_template": "ูพุงู ุฏุงุฏู! ๐"
      }
    }
  ]
}
```

### 3. ุชุณุช Webhook:
```http
POST /api/settings/instagram-channels/{id}/test-webhook/
```

---

## โ Validation Rules:

```javascript
// ุงฺฏุฑ dm_mode === 'STATIC':
- dm_text_template: ุงุฌุจุงุฑุ ุญุฏุงฺฉุซุฑ 1000 ฺฉุงุฑุงฺฉุชุฑ
- ุญุฏุงฺฉุซุฑ 3 ุฏฺฉูู CTA

// ุงฺฏุฑ dm_mode === 'PRODUCT':
- product_id: ุงุฌุจุงุฑ

// ุงฺฏุฑ public_reply_enabled === true:
- public_reply_template: ุงุฌุจุงุฑุ ุญุฏุงฺฉุซุฑ 300 ฺฉุงุฑุงฺฉุชุฑ
```

---

## ๐จ UI/UX ูฺฉุงุช ููู:

1. **ูุชู ุซุงุจุช**: ุฏฺฉููโูุง ฺฉูฺฉ ุจุฑุง ุฏุฑุฌ {{username}}ุ {{comment_text}}
2. **ุฏฺฉูู CTA**: ุฑุงูููุง ู ูุซุงู ุจุฑุง ูุฑูุช [[CTA:ุนููุงู|ููฺฉ]]
3. **ุงูุชุฎุงุจ ูุญุตูู**: AsyncSelect ุจุง ุนฺฉุณ ูุญุตูู
4. **ูุดุฏุงุฑูุง**: 
   - ููุท Business/Creator
   - ุญุฏุงฺฉุซุฑ 3 ุฏฺฉูู
   - Webhook ุจุงุฏ ุชูุธู ุดุฏู ุจุงุดุฏ

---

## ๐ฆ Component Structure ูพุดููุงุฏ:

```
WorkflowBuilder/
โโโ TriggerSelector.jsx
โ   โโโ InstagramCommentTrigger (ุดุฑุทโูุง - ุงุฎุชุงุฑ)
โ
โโโ ActionBuilder.jsx
โ   โโโ InstagramCommentAction/
โ       โโโ DMConfigForm.jsx
โ       โ   โโโ StaticTextMode
โ       โ   โโโ ProductMode (ุจุง ProductSelector)
โ       โโโ PublicReplyForm.jsx
โ
โโโ ActionValidation.js
```

---

## ๐ ุชุฑุชุจ ูพุงุฏูโุณุงุฒ ูพุดููุงุฏ:

### ูุฑุญูู 1 (ฑ ุฑูุฒ):
- [ ] ุงุถุงูู ฺฉุฑุฏู trigger ู action ุจู selector
- [ ] UI ุงููู form (ุจุฏูู validation)

### ูุฑุญูู 2 (ฑ ุฑูุฒ):
- [ ] ุงุชุตุงู ุจู API ูุญุตููุงุช
- [ ] ูพุงุฏูโุณุงุฒ ProductSelector

### ูุฑุญูู 3 (ฑ ุฑูุฒ):
- [ ] Validation logic
- [ ] Helper buttons ู ุฑุงูููุงูุง
- [ ] ููุงุด character count

### ูุฑุญูู 4 (ฑ ุฑูุฒ):
- [ ] ุชุณุช ฺฉุงูู
- [ ] ุฑูุน ุจุงฺฏโูุง
- [ ] Polishing

**ุฌูุน ฺฉู**: ~4 ุฑูุฒ ฺฉุงุฑ

---

## ๐ ูุดฺฉูุงุช ุงุญุชูุงู ู ุฑุงูโุญู:

### ูุดฺฉู: "ูุญุตููุงุช ููุฏ ููโุดููุฏ"
```javascript
// ฺฺฉ ฺฉูุฏ endpoint ุฏุฑุณุช ุงุณุช:
GET /api/knowledge/products/
// Response ุจุงุฏ ุดุงูู: results, count, next, previous
```

### ูุดฺฉู: "Validation ุฐุฎุฑู ููโุดูุฏ"
```javascript
// ูุทูุฆู ุดูุฏ config ุจู ุงู ูุฑูุช ุงุณุช:
{
  dm_mode: 'STATIC' | 'PRODUCT',
  dm_text_template: string,  // if STATIC
  product_id: uuid,           // if PRODUCT
  public_reply_enabled: boolean,
  public_reply_template: string  // if enabled
}
```

### ูุดฺฉู: "ุฏฺฉูู CTA ฺฉุงุฑ ููโฺฉูุฏ"
```javascript
// ูุฑูุช ุฏูู:
[[CTA:ุนููุงู ุฏฺฉูู|https://example.com]]

// โ ุงุดุชุจุงู:
[CTA:ุนููุงู|ููฺฉ]
[[CTA: ุนููุงู | ููฺฉ ]]  // ูุงุตูู ุงุถุงูู

// โ ุฏุฑุณุช:
[[CTA:ุณุงุช ูุง|https://example.com]]
```

---

## ๐ ุณูุงูุงุชุ

ุจุฑุง ูุฑ ุณูุงู ุฏุฑ ููุฑุฏ:
- ุณุงุฎุชุงุฑ ุฏูู API
- ููููู Response
- Edge cases
- ูุญูู ุชุณุช

ุจุง ุชู ุจฺฉโุงูุฏ ููุงููฺฏ ฺฉูุฏ.

---

**ูฺฉุชู ููู**: 
ุงู feature ุจู Webhook ุงูุณุชุงฺฏุฑุงู ูุงุจุณุชู ุงุณุช. ุงฺฏุฑ ุฏุฑ ุชุณุช ูุดฺฉู ุฏุงุดุชุฏุ 
ุงุญุชูุงูุงู ุจู ุชูุธูุงุช Webhook ุฏุฑ Meta App ูุงุฒ ุงุณุชุ ูู ูุดฺฉู ูุฑุงูุช.

---

ุชุงุฑุฎ: 2025-11-17  
ูุณุฎู: 1.0

