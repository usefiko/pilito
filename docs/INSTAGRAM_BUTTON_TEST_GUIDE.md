# ๐ฑ ุฑุงูููุง ุชุณุช ูุงูุน Instagram Button Template

## โ ุชุณุชโูุง ุฎูุฏฺฉุงุฑ: ูููู!

```
โ Test 1: ฺฉ CTA ุณุงุฏู - PASSED
โ Test 2: ฺูุฏ CTA - PASSED  
โ Test 3: ุจุฏูู CTA - PASSED
โ Test 4: URL ูุงูุนุชุจุฑ - PASSED
โ Test 5: ูุงุตููโูุง ุงุถุงู - PASSED
```

---

## ๐งช ูุฑุญูู 1: ุชุณุช Manual Prompt ุฏุฑ Admin

### ฺฏุงู 1: ูุฑูุฏ ุจู Admin Panel

```
URL: https://YOUR_DOMAIN/admin
User: admin ุญุณุงุจ ุฎูุฏ
```

### ฺฏุงู 2: ูพุฏุง ฺฉุฑุฏู Manual Prompt

```
Admin > Settings > AI Prompts > Manual Prompt
```

### ฺฏุงู 3: ุงุถุงูู ฺฉุฑุฏู CTA ุจู Manual Prompt

ุฏุฑ ูุณูุช **Manual Prompt** ุงู ูุชู ุฑุง ุงุถุงูู ฺฉูุฏ:

```
=== ุฏุฑุจุงุฑู ูฺฉู ===

ูฺฉู ฺฉ ูพูุชูุฑู ููุดููุฏ ูุฏุฑุช ฺฏูุชโูฺฏู ุงุณุช ฺฉู ุจู ฺฉุณุจโูฺฉุงุฑูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุจุง ูุดุชุฑุงู ุฎูุฏ ุงุฒ ุทุฑู ุงูุณุชุงฺฏุฑุงูุ ุชูฺฏุฑุงู ู ูุงุชุณุงูพ ุจูุชุฑ ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ฺฉููุฏ.

ูฺฺฏโูุง ุงุตู:
- ูพุงุณุฎฺฏู ุฎูุฏฺฉุงุฑ ุจุง AI
- ูุฏุฑุช ฺฏูุชโูฺฏููุง ุฏุฑ ฺฉ ุฏุงุดุจูุฑุฏ
- ุชุฌุฒู ู ุชุญูู ุฑูุชุงุฑ ูุดุชุฑ

ุจุฑุง ุงุทูุงุนุงุช ุจุดุชุฑ [[CTA:ุณุงุช ูฺฉู|https://fiko.ai]] ูุฑุงุฌุนู ฺฉูุฏ.

ุจุฑุง ูุดุงูุฏู ููุชโูุง [[CTA:ูพููโูุง|https://fiko.ai/pricing]] ฺฉูฺฉ ฺฉูุฏ.
```

**โ๏ธ ูฺฉุงุช ููู**:
- ูุฑูุช ุฏูู: `[[CTA:ุนููุงู|URL]]`
- ูุงุตูู ูฺฏุฐุงุฑุฏ: `[[CTA: ...]]` โ
- URL ุจุงุฏ ุจุง `https://` ุดุฑูุน ุดูุฏ
- ุนููุงู ุญุฏุงฺฉุซุฑ 20 ฺฉุงุฑุงฺฉุชุฑ
- ุญุฏุงฺฉุซุฑ 3 ุฏฺฉูู

### ฺฏุงู 4: ุฐุฎุฑู

ุจุนุฏ ุงุฒ ุงุถุงูู ฺฉุฑุฏู ูุชูุ **Save** ฺฉูุฏ.

---

## ๐ฑ ูุฑุญูู 2: ุชุณุช ุฏุฑ Instagram

### ฺฏุงู 1: ุฑูุชู ุจู Instagram Direct

1. ุงุฒ ููุจุงู ุง ุฏุณฺฉุชุงูพ Instagram ุจุงุฒ ฺฉูุฏ
2. ุจู Direct Message ุตูุญู ฺฉุณุจโูฺฉุงุฑุชุงู ุจุฑูุฏ
3. ุงฺฏุฑ ูุจูุงู ูพุงู ูุฏุงุฏุฏุ ฺฉ ูพุงู ุจูุฑุณุชุฏ ุชุง ฺฏูุชโูฺฏู ุงุฌุงุฏ ุดูุฏ

### ฺฏุงู 2: ุงุฑุณุงู ูพุงู ุชุณุช

ูพุงูโูุง ุชุณุช ฺฉู ูโุชูุงูุฏ ุจูุฑุณุชุฏ:

```
1๏ธโฃ ุชุณุช ุณุงุฏู:
"ุฏุฑุจุงุฑู ูฺฉู ุจฺฏู"

2๏ธโฃ ุชุณุช ูุณุชูู:
"ูฺฉู ฺูุ"

3๏ธโฃ ุชุณุช ุนููู:
"ุชูุถุญ ุจุฏู"
```

### ฺฏุงู 3: ุงูุชุธุงุฑ ุจุฑุง ูพุงุณุฎ AI

**ุงูุชุธุงุฑ**:
- โ ุจุนุฏ ุงุฒ ฺูุฏ ุซุงูู typing indicator ูโุจูุฏ
- โ ูพุงู ูุชู + ุฏฺฉููโูุง ุธุงูุฑ ูโุดููุฏ

**ุดฺฉู ุฏฺฉููโูุง**:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ูุชู ูพุงุณุฎ AI            โ
โ ...                     โ
โ                         โ
โ โโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ    ุณุงุช ูฺฉู       โ โ โ ุฏฺฉูู 1
โ โโโโโโโโโโโโโโโโโโโโโโโ โ
โ โโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ    ูพููโูุง           โ โ โ ุฏฺฉูู 2
โ โโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ูุฑุญูู 3: ุจุฑุฑุณ Logs (ุฑู ุณุฑูุฑ)

### ฺฺฉ ฺฉุฑุฏู ูุงฺฏโูุง AI

```bash
# SSH ุจู ุณุฑูุฑ
ssh root@YOUR_SERVER_IP

cd /root/manual_pilito/pilito

# ุจุฑุฑุณ ูุงฺฏโูุง CTA extraction
docker compose logs -f --tail 100 web | grep -E "CTA|Button"
```

**ูุงฺฏโูุง ููุฑุฏ ุงูุชุธุงุฑ**:

```
โ Extracted 2 CTA button(s) from text
๐ค Sending Button Template with 2 button(s) to 1234567890
โ AI response sent to Instagram successfully: message ABC123
๐ Sent with 2 CTA button(s)
```

---

## โ ุนุจโุงุจ (ุงฺฏุฑ ุฏฺฉูู ูุงูุฏ)

### ฺฺฉ 1: ุขุง ูุชู Manual Prompt ุตุญุญ ุงุณุชุ

```bash
# ุฏุฑ Django shell:
python manage.py shell

from settings.models import AIPrompts
prompts = AIPrompts.get_prompts()
print(prompts.manual_prompt)

# ุจุงุฏ [[CTA:...]] ุฑุง ุจุจูุฏ
```

### ฺฺฉ 2: ุขุง CTA extraction ฺฉุงุฑ ูโฺฉูุฏุ

```bash
# ุฏุฑ Django shell:
from message.utils.cta_utils import extract_cta_from_text

test_text = "ุชุณุช [[CTA:ููฺฉ|https://fiko.ai]] ูุชู"
clean, buttons = extract_cta_from_text(test_text)

print("Clean:", clean)
print("Buttons:", buttons)

# ุงูุชุธุงุฑ:
# Clean: ุชุณุช ูุชู
# Buttons: [{'type': 'web_url', 'title': 'ููฺฉ', 'url': 'https://fiko.ai'}]
```

### ฺฺฉ 3: ุขุง Message ุจุง buttons ุฐุฎุฑู ุดุฏุ

```bash
# ุฏุฑ Django shell:
from message.models import Message

# ุขุฎุฑู ูพุงู AI
last_ai = Message.objects.filter(is_ai_response=True).order_by('-created_at').first()

print("Content:", last_ai.content)
print("Buttons:", last_ai.buttons)
print("Has buttons:", last_ai.buttons is not None)

# ุงฺฏุฑ buttons = None โ ูุดฺฉู ุฏุฑ extraction
# ุงฺฏุฑ buttons = [...] โ extraction ูููู ุจูุฏู
```

### ฺฺฉ 4: ุขุง Instagram API ูููู ุจูุฏูุ

```bash
# ุจุฑุฑุณ ูุงฺฏโูุง Instagram API:
docker compose logs --tail 200 web | grep -A 5 "Button Template"

# ุงฺฏุฑ Error 400 ุฏุฏุฏ:
# - Payload format ูุดฺฉู ุฏุงุฑุฏ
# - ุงุญุชูุงูุงู buttons structure ุตุญุญ ูุณุช

# ุงฺฏุฑ Error 190 ุฏุฏุฏ:
# - Token expired - ูุงุฒ ุจู refresh
```

### ฺฺฉ 5: ุขุง ูุชู ุฎู ุทููุงู ุงุณุชุ

```bash
# ุงฺฏุฑ ูุชู > 400 ฺฉุงุฑุงฺฉุชุฑ:
# ุณุณุชู automatic fallback ุจู text ูุนููู ูโฺฉูุฏ

# ูุงฺฏ ููุฑุฏ ุงูุชุธุงุฑ:
"Text too long (XXX chars) for Button Template, falling back to plain text"
```

---

## ๐ ุชุณุชโูุง ุจุดุชุฑ

### Test Case 1: ฺฉ ุฏฺฉูู
```
Manual Prompt:
"ุจุฑุง ุณูุงุฑุด [[CTA:ุณุงุช|https://fiko.ai]] ูุฑุงุฌุนู ฺฉูุฏ"

ูพุงู Instagram: "ฺุทูุฑ ุณูุงุฑุด ุจุฏูุ"
```

### Test Case 2: ุณู ุฏฺฉูู (Max)
```
Manual Prompt:
"ููฺฉโูุง:
[[CTA:ุณุงุช|https://fiko.ai]]
[[CTA:ููุช|https://fiko.ai/pricing]]
[[CTA:ุชูุงุณ|https://fiko.ai/contact]]"

ูพุงู Instagram: "ููฺฉุงุชูู ุฑู ุจุฏู"
```

### Test Case 3: ูุชู ุจููุฏ (Fallback)
```
Manual Prompt:
"ูุชู ุฎู ุทููุงู (ุจุด ุงุฒ 400 ฺฉุงุฑุงฺฉุชุฑ)... [[CTA:ููฺฉ|...]]"

ุงูุชุธุงุฑ: Text ูุนููู (ุจุฏูู Button Template)
```

---

## โ Checklist ููุง ุชุณุช

- [ ] Admin Panel: Manual Prompt ุจุง [[CTA:...]] ุงุถุงูู ุดุฏ
- [ ] Instagram: ูพุงู ุชุณุช ูุฑุณุชุงุฏู ุดุฏ
- [ ] Instagram: typing indicator ุฏุฏู ุดุฏ
- [ ] Instagram: ูพุงู ูุชู + ุฏฺฉููโูุง ุขูุฏ
- [ ] Instagram: ฺฉูฺฉ ุฑู ุฏฺฉูู โ browser ุจุงุฒ ุดุฏ
- [ ] Logs: "Extracted X CTA button(s)" ุฏุฏู ุดุฏ
- [ ] Logs: "Sending Button Template" ุฏุฏู ุดุฏ
- [ ] Logs: "Sent with X CTA button(s)" ุฏุฏู ุดุฏ
- [ ] Database: Message.buttons != None

---

## ๐ฏ ูพุงูโูุง ููููู ุจุฑุง ุชุณุช

ุจุฑุง ูุทูุฆู ุดุฏูุ ุงู ูพุงูโูุง ุฑุง ุงูุชุญุงู ฺฉูุฏ:

1. **"ุฏุฑุจุงุฑู ุดูุง ุจฺฏู"** โ ุจุงุฏ ูุชู + ุฏฺฉูู ุจุงุฏ
2. **"ูฺฉู ฺูุ"** โ ุจุงุฏ ูุชู + ุฏฺฉูู ุจุงุฏ
3. **"ููุชุงุชูู ฺูุฏุฑูุ"** โ ุจุณุชู ุจู Manual Prompt
4. **"ฺุทูุฑ ุณูุงุฑุด ุจุฏูุ"** โ ุจุณุชู ุจู Manual Prompt
5. **"ููฺฉ ุณุงุชุชูู ุฑู ุจุฏู"** โ ุจุงุฏ ูุชู + ุฏฺฉูู ุจุงุฏ

---

## ๐ ุงฺฏุฑ ููู ฺุฒ OK ุจูุฏ...

**ุชุจุฑฺฉ! ๐** 

ุดูุง ุจุง ููููุช:
- โ Instagram Button Template ุฑุง ูพุงุฏูโุณุงุฒ ฺฉุฑุฏุฏ
- โ CTA Buttons ุฏุฑ AI responses ูุนุงู ฺฉุฑุฏุฏ
- โ ูุนูุงุฑ multi-channel ุขูุงุฏู ุฏุงุฑุฏ
- โ UX ุจูุชุฑ ุจุฑุง ูุดุชุฑุงู ุณุงุฎุชุฏ

### ูุฏู ุจุนุฏ:

1. **Test ุฑู ฺูุฏ ูุดุชุฑ ูุงูุน**
2. **Monitor ฺฉูุฏ**: ุฏฺฉููโูุง click ูโุดููุฏุ
3. **A/B Test**: ุจุง/ุจุฏูู ุฏฺฉูู ฺฉุฏุงู ุจูุชุฑ ุงุณุชุ
4. **ุชูุณุนู**: WhatsApp ู Telegram
5. **UI ุจูุชุฑ**: ุจุฑุง ุณุงุฎุชู CTA ุฏุฑ admin panel

---

**ุขูุงุฏู ุจุฑุง production! ๐**

